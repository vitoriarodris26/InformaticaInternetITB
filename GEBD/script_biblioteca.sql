-- CREATE DATABASE biblioteca2c; 
-- use biblioteca2C;
-- EX 2

DROP TABLE LIVRO;
CREATE TABLE  LIVRO(
ISBN DOUBLE PRIMARY KEY,
TITULO_LIVRO VARCHAR(100),
EDITORA VARCHAR (50),
ANO INT,
COD_CAT INT,
FOREIGN KEY (COD_CAT) REFERENCES CATEGORIA(COD_CAT)
);
DROP TABLE AUTOR;
CREATE TABLE AUTOR(
COD_AUTOR INTEGER PRIMARY KEY,
NACIONALIDADE VARCHAR(30),
NOME_AUTOR VARCHAR(60)
);
DROP TABLE AUTOR_LIVRO;
CREATE TABLE AUTOR_LIVRO(
COD_AUTOR INTEGER ,
ISBN DOUBLE,
PRIMARY KEY (COD_AUTOR, ISBN),
FOREIGN KEY (COD_AUTOR) REFERENCES AUTOR (COD_AUTOR),
FOREIGN KEY (ISBN) REFERENCES LIVRO (ISBN)
);

DROP TABLE CATEGORIA;
CREATE TABLE CATEGORIA(
COD_CAT INTEGER PRIMARY KEY,
DESC_CAT VARCHAR(40)
);
-- EX 3 
INSERT INTO AUTOR  (COD_AUTOR ,NACIONALIDADE, NOME_AUTOR) VALUES (1,'BRASILEIRO','DAN BROWN');
INSERT INTO AUTOR  (COD_AUTOR ,NACIONALIDADE, NOME_AUTOR) VALUES (2,'PERNAMBUCANO','CLARICE LISPECTOR');

-- EX 6 
INSERT INTO CATEGORIA (COD_CAT, DESC_CAT) VALUES (1000, 'ROMANCE');
INSERT INTO CATEGORIA (COD_CAT, DESC_CAT) VALUES (2000, 'CONTOS E CRÔNICAS');
INSERT INTO CATEGORIA (COD_CAT, DESC_CAT) VALUES (3000, 'HUMOR');

-- EX 4
INSERT INTO LIVRO (ISBN, TITULO_LIVRO, EDITORA, ANO, COD_CAT ) VALUES (9788599296394, 'ANJOS E DEMONIOS', 'ARQUEIRO', 2014, 1000);
INSERT INTO LIVRO (ISBN, TITULO_LIVRO, EDITORA, ANO, COD_CAT ) VALUES (9788599296684, 'SIMBOLO E PERDIDO', 'ARQUEIRO', 2015, 1000);
INSERT INTO AUTOR_LIVRO (COD_AUTOR,ISBN) VALUES (1, 9788599296394);
INSERT INTO AUTOR_LIVRO (COD_AUTOR,ISBN) VALUES (1, 9788599296684);

-- EX 5
INSERT INTO LIVRO (ISBN, TITULO_LIVRO, EDITORA, ANO, COD_CAT ) VALUES (8532509533, 'PARA NÃO ESQUECER', 'ROCCO', 2000, 2000);
INSERT INTO LIVRO (ISBN, TITULO_LIVRO, EDITORA, ANO, COD_CAT ) VALUES (8532509452, 'A LEGIÃO ESTRANGEIRA', 'ROCCO', 1920, 2000);
INSERT INTO AUTOR_LIVRO (COD_AUTOR,ISBN) VALUES (2, 8532509533);
INSERT INTO AUTOR_LIVRO (COD_AUTOR,ISBN) VALUES (2, 8532509452);
SELECT * FROM LIVRO;
SELECT * FROM AUTOR_LIVRO;

-- EX 7
ALTER TABLE CATEGORIA ADD COD_STATUS CHAR(1);
ALTER TABLE AUTOR ADD COD_STATUS CHAR(1);
ALTER TABLE LIVRO ADD COD_STATUS CHAR(1);

-- EX 8
UPDATE CATEGORIA SET COD_STATUS = 'A';
UPDATE LIVRO SET COD_STATUS = 'A';
UPDATE AUTOR SET COD_STATUS = 'A';

-- EX 9
ALTER TABLE LIVRO DROP FOREIGN KEY LIVRO_IBFK_1;
DELETE FROM CATEGORIA WHERE COD_CAT = 2000;

-- EX 10
ALTER TABLE AUTOR_LIVRO DROP FOREIGN KEY AUTOR_LIVRO_IBFK_2;
UPDATE LIVRO SET ISBN = 202020, ANO = 2016  WHERE ISBN = 9788599296394;









